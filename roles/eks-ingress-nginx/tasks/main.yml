- name: "cluster {{ ClusterContext }} : Create NameSpace"
  kubernetes.core.k8s:
    api_version: v1
    kind: Namespace
    context: "{{ ClusterContext }}"
    name: "{{ Namespace }}"
    state: present

- name: "cluster {{ ClusterContext }} : Deploy Ingress Nginx "
  kubernetes.core.helm:
    name: "{{ Name }}"
    chart_ref: "{{ Chart }}"
    chart_version: "{{ Version }}"
    context: "{{ ClusterContext }}"
    release_namespace: "{{ Namespace }}"
    values: "{{ lookup('template', 'roles/eks-ingress-nginx/template/values.temp') | from_yaml }}"
